# 브라우저 작동 원리

<BR>

## www.naver.com을 주소창에 치면 어떻게 될까요?
  
<BR>

대기열, 캐싱, DNS, 라우팅, ARP, 초기 연결을 거쳐 컨텐츠를 다운받게 되고 
이후 브라우저 렌더링 과정을 거쳐 네이버 화면이 나타나게 됩니다. 
또한 이러한 과정이 비캡슐화, 캡슐화 과정을 거쳐서 이뤄지게 됩니다. 

<BR><BR>
  
 ### 1. 대기열 
 
 <BR> 
 
 브라우저는 주소창 입력에 대한 요청을 대기열에 넣습니다. 
 이 때 HTTP/1.0 및 HTTP/1.1의 경우 오리진당 6개의 병렬적인 TCP 연결만을 허용하며 
 HTTP/2.0의 경우 스크림을 통해 HTTP1.x 의 헤드라인 차단 등을 해결합니다. 
  
 <BR><BR> 
   
   
### 2. 캐싱
   
  <BR> 
  
캐싱은 요청된 갑의 결과값을 저장하고 그 값을 다시 요청하면 다시 제공하는 기술입니다. 
이는 공유 프록시 캐시와 브라우저 캐시로 나눠집니다. 
    
     <BR> 
    
### 1) 브라우저 캐시 

브라우저 캐시에서는 쿠키, 로컬스토리지 등을 포함한 캐시입니다. 
브라우저 자체가 사용자가 HTTP를 통해 다운로드 하는 모든 문서를 보유하는 것을 말합니다. 
예를 들어 어떤 사이트를 갔다가 다시 방문하면 굉장히 빠르게 컨텐츠가 나타납니다. 
이를 브라우저 캐시라고 합니다. 인터넷 사용기록을 삭제하고 싶어서 누르려고 하면 
쿠키 및 기타 사이트 데이터, 캐시 부분이 존재. 
    
![image](https://user-images.githubusercontent.com/72599761/209499210-c0914d5b-cc0c-41ba-a2fd-46e68737c0c9.png)

    
        <BR> 
       
### 2) 공유 프록시 캐시

공유 프록시 캐시는 요청한 서버에서 프록시서버가 캐싱을 하는 것을 말합니다. 
예를 들어 Node.js로 서버를 구축한다면 
앞단의 프록시서버로 nginx서버를 둬서 이 서버를 캐싱 서버로도 사용할 수 있는 것이죠.  

![image](https://user-images.githubusercontent.com/72599761/209499323-019e7591-de24-4686-936a-17dc0cbf827c.png)
    
          
           <BR>  <BR> 

 ## 3. DNS 조회 
 
             <BR> 
             
브라우저가 요청의 IP 주소를 확인하는 단계입니다. 
DNS는 도메인 이름과 IP 주소를 매핑해주는 서버입니다. 
             
     <BR> 
       
    예를 들어 www.naver.com에 DNS 쿼리가 오면 
    [Root DNS]→ [.com DNS] → [.naver DNS] → [.www DNS] 과정을 거쳐 
    완벽한 주소를 찾아 IP 주소를 매핑합니다.  
​
참고로 바로 DNS서버로 요청을 전달하는 것은 아니고 
먼저 컴퓨터 메모리에 있는 호스트 파일 등 캐시를 확인한 후 
캐시미스가 일어나면 DNS서버로 요청합니다.

              <BR> 
    
### (1) DNS의 장점 

이를 통해 IP 주소가 바뀌어도 사용자들에게 똑같은 도메인 주소로 서비스할 수 있습니다. 
예를 들어 www.naver.com의 IP 주소가 222.111.222.111에서 222.111.222.122로 바뀌었음에도 
똑같은 www.naver.com이라는 주소로 서비스가 가능하겠죠?

=> 서비스를 운영할 때 반드시 서버의 ip가 바뀌는 경우가 생기는데 
똑같은 주소로 서비스가 가능하다. 
                
​  <BR> 

### (2) 루프백IP

참고로 127.0.0.1이란 루프백 IP로, 본인 PC의 IP를 뜻하며 localhost나 127.0.0.1을입력하면 DNS를 타지 않고 바로 본인 PC로 연결됩니다  

     <BR>  <BR> 
                
                
 ## 4. 라우팅 

     <BR> 
       
라우팅은 IP 주소를 찾아가는 과정인데요. 
DNS에서 받은 IP주소를 기반으로 해당 목적지까지 
라우팅 테이블, 서브네트워크 등을 거쳐 IP주소를 찾아가야 합니다. 

       <BR>
       
IP 주소를 통해 통신하는 과정을 홉바이홉(hop by hop) 통신이라고도 합니다.
여기서 홉(hop)이란 영어 뜻 자체로는 건너뛰는 모습을 의미합니다. 
이는 통신망에서 각 패킷이 여러 개의 라우터를 건너가는 모습을 비유적으로 표현한 것입니다. 
각각의 라우터에 있는 라우팅 테이블의 IP를 기반으로 패킷을 전달하고 다시 전달해나갑니다.

         <BR>
         
즉, 통신 장치에 있는 ‘라우팅 테이블’의 IP를 통해 
시작 주소부터 시작하여 다음 IP로 계속해서 이동하는 
‘라우팅’ 과정을 거쳐 패킷이 최종 목적지까지 도달하는 통신을 말합니다.

<BR>  <BR>  
       
 ### (1) 라우팅 테이블 
  
       <BR>  
         
라우팅 테이블(routing table)은 송신지에서 수신지까지 도달하기 위해 사용되며 라우터에 들어가 있는 목적지 정보들과 그 목적지로 가기 위한 방법이 들어 있는 리스트를 뜻합니다. 라우팅 테이블에는 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해거쳐야 할 다음 라우터의 정보를 가지고 있습니다.

    
       <BR>  
    
### (2) 게이트웨이 

게이트웨이(gateway)는 서로 다른 통신망, 
프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 
관문 역할을 하는 컴퓨터나 소프트웨어를 두루 일컫는 용어입니다.

         
    
    
    
    
    
    
    
    
[[출처] [CS전공지식면접] www.naver.com을 주소창에 치면 어떻게 될까요?|작성자 큰돌](https://blog.naver.com/jhc9639/222700552159)

    
    
    
    
    
    
    
    
    
